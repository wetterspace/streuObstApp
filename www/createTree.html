<!DOCTYPE html>
<html>
	<head>
		 <meta charset="utf-8" />
		 <title> Create Tree </title>
	</head>

<link rel="stylesheet" type="text/css" href="css/bootstrap.css"/>
<script type="text/javascript" src="lib/jquery.js"></script>
<script src="http://openlayers.org/en/v3.10.1/build/ol.js" type="text/javascript"></script>

<body onload="setOptions()">
<div id="navbar_container"></div>

<h1> Baum ID </h1>
	<p> ObstArt </p>
	<select id="selectedObstArt" onchange="setOptions()">
		<option>Apfel</option>
		<option>Birne</option>
		<option>Pflaume</option>
		<option>Nuss</option>
	</select>
	
	<p> Sortenname </p>
	<select id="selectedSortname">
	</select>
	
	<p> Position </p>
	<input id="userPosition" type="text"></input>
	<button type="button" onclick="getLocation()">Position laden</button>
	
	<p> Diploid/Triploid </p>
	<select id="selectedPloid">
		<option>Diploid</option>
		<option>Triploid</option>
	</select>
	
	<p> Gepflanzt: </p>
	<input type="text" id="selectedDate"></input>
		
		<p onclick="getInput()"> Baum erstellen! </p>
		
		<script type="text/javascript">
		
			$("#navbar_container").load("navbar.html");
		
		
		function setOptions(){
		var e = document.getElementById("selectedObstArt");
		var e2= document.getElementById("selectedSortname");
		
		if(e.selectedIndex == 0){
			while(e2.firstChild){
				e2.removeChild(e2.firstChild);
			}
			var option1 = document.createElement("option");
			var option2 = document.createElement("option");
			var option3 = document.createElement("option");
			var option4 = document.createElement("option");
			
			option1.text = "Apfel1";
			option2.text = "Apfel2";
			option3.text = "Apfel3";
			option4.text = "Abpfel4";
			
			e2.add(option1);
			e2.add(option2);
			e2.add(option3);
			e2.add(option4);
		 }
		
		if(e.selectedIndex == 1){
			while(e2.firstChild){
				e2.removeChild(e2.firstChild);
			}
			var option1 = document.createElement("option");
			var option2 = document.createElement("option");
			var option3 = document.createElement("option");
			var option4 = document.createElement("option");
			
			option1.text = "Birne1";
			option2.text = "Birne2";
			option3.text = "Birne3";
			option4.text = "Birne4";
			
			e2.add(option1);
			e2.add(option2);
			e2.add(option3);
			e2.add(option4);
		 }
		
		if(e.selectedIndex == 2){
			while(e2.firstChild){
				e2.removeChild(e2.firstChild);
			}
			var option1 = document.createElement("option");
			var option2 = document.createElement("option");
			var option3 = document.createElement("option");
			var option4 = document.createElement("option");
			
			option1.text = "Pflaume1";
			option2.text = "Pflaume2";
			option3.text = "Pflaume3";
			option4.text = "Pflaume4";
			
			e2.add(option1);
			e2.add(option2);
			e2.add(option3);
			e2.add(option4);
		 }
		 
		 if(e.selectedIndex == 3){
			while(e2.firstChild){
				e2.removeChild(e2.firstChild);
			}
			var option1 = document.createElement("option");
			var option2 = document.createElement("option");
			var option3 = document.createElement("option");
			var option4 = document.createElement("option");
			
			option1.text = "Nuss1";
			option2.text = "Nuss2";
			option3.text = "Nuss3";
			option4.text = "Nuss4";
			
			e2.add(option1);
			e2.add(option2);
			e2.add(option3);
			e2.add(option4);
		 }
		}
		
		var trees = [];
		
		function Tree(obstArt,sortName,position,ploid,date){
			this.obstArt = obstArt;
			this.sortName = sortName;
			this.position = position;
			this.ploid = ploid;
			this.date = date;
		}
		
		function getInput(){
		var obstArt = document.getElementById("selectedObstArt");
		var type = obstArt.options[obstArt.selectedIndex].text;
		
		
		var sortName = document.getElementById("selectedSortname");
		var sortType = sortName.options[sortName.selectedIndex].text;
		
		
		var position = document.getElementById("userPosition").value; //!
		
		
		var ploidBox = document.getElementById("selectedPloid");
		var ploid = ploidBox.options[ploidBox.selectedIndex].text;
		
		
		var date = document.getElementById("selectedDate").value;
		
		
		var myTree = new Tree(type,sortType,position,ploid,date);
		trees.push(myTree);
		alert("Obstart: " + myTree.obstArt  + "\n" + "Sortenname: " + myTree.sortName + "\n" + "Position: " + myTree.position + "\n" + "Ploid: " + myTree.ploid + "\n" + "Gepflanzt im Jahr: " + myTree.date);
		}
		
		function getPosition(position){
			var longi = position.coords.longitude;
			var lat = position.coords.latitude;
			
			var e = document.getElementById("userPosition");
			e.value = longi + "," + lat;
			
		}
		
		function getLocation(){
			if(navigator.geolocation){
				navigator.geolocation.getCurrentPosition(getPosition);
			}
			else{
			
			}
		}
		
		</script>
</body>
</html>